{% extends "base.html" %}

{% block content %}
<div class="container-fluid py-5 px-lg-5" style="background-color: #fcfcfd; min-height: 100vh;">
    
    <div class="row mb-5 justify-content-center">
        <div class="col-lg-8 text-center">
            <div class="sos-pulse-container mb-4">
                <div class="pulse-ring"></div>
                <i class="bi bi-broadcast text-danger fs-1"></i>
            </div>
            <h1 class="fw-bold display-4">Alumni <span class="text-danger">SOS</span></h1>
                <strong>Respond to a brother today.</strong>
        </div>
    </div>

    <div class="container" id="active-signals">
        <div class="row g-4">
            {% for sos_request in sos_requests %}
            <div class="col-12">
                <div class="card shadow-sm border-0 rounded-4">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-2 text-center">
                                <img src="{% if sos_request.requester.profile.profile_picture %}{{ sos_request.requester.profile.profile_picture.url }}{% else %}https://ui-avatars.com/api/?name={{ sos_request.requester.username }}&background=0D6EFD&color=fff&size=150{% endif %}" class="rounded-circle" width="80" height="80" alt="Avatar">
                                <h6 class="mt-3 mb-0 fw-bold">{{ sos_request.requester.get_full_name|default:sos_request.requester.username }}</h6>
                            </div>
                            <div class="col-md-10">
                                <h5 class="fw-bold">{{ sos_request.title }}</h5>
                                <p>{{ sos_request.description }}</p>
                                <a href="{% url 'view_ob' sos_request.requester.id %}" class="btn btn-primary">Connect</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="col-12 text-center py-5">
                <div class="opacity-25 mb-4">
                    <i class="bi bi-shield-check display-1"></i>
                </div>
                <h3 class="text-muted">All clear! No active SOS signals at the moment.</h3>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<style>
    /* SOS Pulse Animation */
    .sos-pulse-container {
        position: relative;
        display: inline-block;
        z-index: 1;
    }
    .pulse-ring {
        content: '';
        width: 100px;
        height: 100px;
        background: rgba(220, 53, 69, 0.2);
        border-radius: 50%;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        animation: pulse 2s infinite;
        z-index: -1;
    }

    @keyframes pulse {
        0% { transform: translate(-50%, -50%) scale(0.5); opacity: 1; }
        100% { transform: translate(-50%, -50%) scale(2.5); opacity: 0; }
    }

    /* Card Styling */
    .sos-card {
        border: 1px solid #f1f5f9 !important;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .sos-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 25px 50px -12px rgba(220, 53, 69, 0.15) !important;
        border-color: rgba(220, 53, 69, 0.2) !important;
    }

    .bg-danger-soft { background-color: #fff1f2; color: #e11d48; }
    
    .btn-danger { background-color: #e11d48; border: none; }
    .btn-danger:hover { background-color: #be123c; transform: translateY(-2px); }

    .sos-card h3 { transition: color 0.3s; }
    .sos-card:hover h3 { color: #e11d48; }
</style>
{% endblock %}