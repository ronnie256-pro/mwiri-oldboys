{% extends "base.html" %}

{% block content %}
<div class="container-fluid py-5 px-lg-5" style="background: linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%); min-height: 100vh;">
    
    <div class="mb-5 text-center">
        <span class="badge bg-primary-soft text-primary px-3 py-2 rounded-pill mb-3 fw-bold">MOBA PRODUCTS</span>
    </div>

    <div class="row g-4">
        <div class="col-lg-9">
            <div class="row g-4">
                {% for product in products %}
                <div class="col-md-6 col-xl-4">
                    <div class="card border-0 shadow-sm h-100 product-card overflow-hidden">
                        <div class="position-relative overflow-hidden" style="height: 240px;">
                            <img src="{{ product.hero_image.url }}" class="card-img-top w-100 h-100" alt="{{ product.name }}" style="object-fit: cover;">
                            <div class="card-img-overlay d-flex flex-column justify-content-between p-3">
                                <div>
                                    <span class="badge bg-blur text-white rounded-pill px-3 py-2 small fw-bold">
                                        {{ product.category.name }}
                                    </span>
                                </div>
                                <div class="text-end">
                                    <span class="badge bg-success-soft text-success rounded-pill px-2 py-1 small fw-bold">
                                        <i class="bi bi-patch-check-fill me-1"></i>Verified
                                    </span>
                                </div>
                            </div>
                        </div>

                        <div class="card-body p-4 d-flex flex-column">
                            <div class="mb-3">
                                <h5 class="fw-bold text-dark mb-1 h5-title">{{ product.name }}</h5>
                                <h4 class="fw-bold text-primary mb-0">UGX {{ product.price|floatformat:0 }}</h4>
                            </div>
                            <div class="d-grid gap-2">
                                <a href="{% url 'product_detail' product.id %}" class="btn btn-primary rounded-pill fw-bold py-2 shadow-sm transition-lift">
                                    View Details
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                {% empty %}
                <div class="col-12 text-center py-5">
                    <div class="opacity-25 mb-3">
                        <i class="bi bi-cart-x display-1"></i>
                    </div>
                    <h4 class="text-muted">The marketplace is empty right now.</h4>
                    <p class="text-muted">Be the first brother to list a product!</p>
                </div>
                {% endfor %}
            </div>

            </div>
<style>
    /* Page Background */
    .container-fluid {
        background: radial-gradient(circle at top left, #eef2ff 0%, #f8fafc 40%, #f1f5f9 100%);
    }

    /* Premium Product Card */
    .product-card {
        border-radius: 30px;
        background: linear-gradient(145deg, #ffffff, #f8fafc);
        transition: all 0.45s cubic-bezier(0.165, 0.84, 0.44, 1);
        border: 1px solid rgba(15, 23, 42, 0.04);
        position: relative;
    }

    .product-card::before {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: 30px;
        padding: 1px;
        background: linear-gradient(135deg, rgba(79,70,229,0.15), rgba(99,102,241,0.05));
        -webkit-mask:
            linear-gradient(#fff 0 0) content-box,
            linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
                mask-composite: exclude;
        pointer-events: none;
    }

    .product-card:hover {
        transform: translateY(-12px) scale(1.02);
        box-shadow: 0 30px 60px -15px rgba(15, 23, 42, 0.15);
    }

    /* Image Refinement */
    .product-card img {
        transition: transform 0.6s ease, filter 0.4s ease;
    }

    .product-card:hover img {
        transform: scale(1.08);
        filter: brightness(1.05);
    }

    /* Soft Badge Styling */
    .bg-primary-soft {
        background-color: rgba(79, 70, 229, 0.1);
        color: #4f46e5;
        font-weight: 600;
    }

    .bg-success-soft {
        background-color: rgba(22, 163, 74, 0.1);
        color: #16a34a;
        font-weight: 600;
    }

    /* Glassmorphism Category Badge */
    .bg-blur {
        background: rgba(15, 23, 42, 0.65);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.15);
        font-weight: 500;
    }

    /* Product Title */
    .h5-title {
        font-weight: 700;
        font-size: 1.05rem;
        letter-spacing: -0.2px;
        display: -webkit-box;
        -webkit-line-clamp: 1;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    /* Price Styling */
    .card-body h4 {
        font-size: 1.35rem;
        letter-spacing: -0.5px;
    }

    /* Premium Button */
    .btn-primary {
        background: linear-gradient(135deg, #4f46e5, #6366f1);
        border: none;
        border-radius: 50px;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 8px 20px rgba(79, 70, 229, 0.25);
    }

    .btn-primary:hover {
        transform: translateY(-3px);
        box-shadow: 0 12px 28px rgba(79, 70, 229, 0.35);
        background: linear-gradient(135deg, #4338ca, #4f46e5);
    }

    /* Empty State Polish */
    .opacity-25 i {
        color: #cbd5e1;
    }

    /* Smooth Animations */
    .transition-lift {
        transition: all 0.25s ease;
    }

    .transition-lift:hover {
        transform: translateY(-2px);
    }
</style>
{% endblock %}